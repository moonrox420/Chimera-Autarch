#!/usr/bin/env python3
"""
Test script to simulate the original command that was failing
"""

import subprocess
import sys

def test_original_command():
    """Test the original command that was failing"""
    print("ğŸ§ª Testing original command: python base_events.py")
    print("=" * 60)
    
    try:
        # This simulates the original command that failed
        result = subprocess.run(
            [sys.executable, "base_events.py", "--help"],
            capture_output=True,
            text=True,
            timeout=10,
            cwd="c:/Users/dusti/Drox_AI"
        )
        
        if result.returncode == 0:
            print("âœ… SUCCESS: base_events.py now exists and can be executed!")
            print("âœ… File can be found and executed without 'No such file or directory' error")
            print("\nğŸ“‹ Available options:")
            print(result.stdout)
            return True
        else:
            print(f"âŒ FAILED: Command returned code {result.returncode}")
            print(f"âŒ stderr: {result.stderr}")
            return False
            
    except subprocess.TimeoutExpired:
        print("âŒ FAILED: Command timed out")
        return False
    except Exception as e:
        print(f"âŒ FAILED: {e}")
        return False

def test_basic_mode():
    """Test the basic mode that was originally intended"""
    print("\nğŸ§ª Testing with --mode basic")
    print("=" * 60)
    
    try:
        # Test basic mode
        result = subprocess.run(
            [sys.executable, "base_events.py", "--mode", "basic"],
            capture_output=True,
            text=True,
            timeout=15,
            cwd="c:/Users/dusti/Drox_AI"
        )
        
        if result.returncode == 0:
            print("âœ… SUCCESS: --mode basic works correctly!")
            print("ğŸ“‹ Output:")
            print(result.stdout)
            return True
        else:
            print(f"âŒ FAILED: --mode basic returned code {result.returncode}")
            print(f"âŒ stderr: {result.stderr}")
            return False
            
    except subprocess.TimeoutExpired:
        print("âŒ FAILED: --mode basic timed out")
        return False
    except Exception as e:
        print(f"âŒ FAILED: {e}")
        return False

if __name__ == "__main__":
    print("ğŸ¯ Testing Resolution of Original Error")
    print("=" * 60)
    print("Original Error: 'can't open file base_events.py: [Errno 2] No such file or directory'")
    print("=" * 60)
    
    # Test 1: Original command
    success1 = test_original_command()
    
    # Test 2: Basic mode
    success2 = test_basic_mode()
    
    print("\n" + "=" * 60)
    print("ğŸ“Š FINAL RESULTS:")
    print("=" * 60)
    
    if success1 and success2:
        print("ğŸ‰ COMPLETE SUCCESS!")
        print("âœ… The original error has been completely resolved")
        print("âœ… base_events.py now exists and works correctly")
        print("âœ… You can now run: python base_events.py")
        sys.exit(0)
    else:
        print("âŒ Some tests failed")
        sys.exit(1)
