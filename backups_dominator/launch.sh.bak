export HTTP_PORT=3000
WS_PORT=3001
HTTP_PORT=3000
WS_PORT=3001
HTTP_PORT=3000
WS_PORT=3001
HTTP_PORT=3000
WS_PORT=3001
HTTP_PORT=3000
WS_PORT=3001
HTTP_PORT=3000
WS_PORT=3001
HTTP_PORT=3000
WS_PORT=3001
HTTP_PORT=3000
WS_PORT=3001
export HTTP_PORT=3000
WS_PORT=3001
HTTP_PORT=3000
WS_PORT=3001
HTTP_PORT=3000
WS_PORT=3001
HTTP_PORT=3000
WS_PORT=3001
HTTP_PORT=3000
WS_PORT=3001
HTTP_PORT=3000
WS_PORT=3001
HTTP_PORT=3000
WS_PORT=3001
HTTP_PORT=3000
WS_PORT=3001

#!/usr/bin/env bash
# CHIMERA AUTARCH - Independent Launcher
# Run anywhere - no VS Code, no Microsoft dependencies required

set -e  # Exit on error

echo "============================================================"
echo "CHIMERA AUTARCH v2.2 - Independent Launcher"
echo "Your Code, Your Control - Zero Microsoft Dependencies"
echo "============================================================"
echo ""

# Detect OS
if [[ "$OSTYPE" == "linux-gnu"* ]]; then
    OS="Linux"
    PYTHON_CMD="python3"
elif [[ "$OSTYPE" == "darwin"* ]]; then
    OS="macOS"
    PYTHON_CMD="python3"
elif [[ "$OSTYPE" == "msys" ]] || [[ "$OSTYPE" == "cygwin" ]]; then
    OS="Windows"
    PYTHON_CMD="python"
else
    OS="Unknown"
    PYTHON_CMD="python3"
fi

echo "üñ•Ô∏è  Detected OS: $OS"
echo ""

# Check Python version
if ! command -v $PYTHON_CMD &> /dev/null; then
    echo "‚ùå Python not found. Please install Python 3.12+ first."
    exit 1
fi

PYTHON_VERSION=$($PYTHON_CMD --version 2>&1 | awk '{print $2}')
echo "üêç Python version: $PYTHON_VERSION"

# Check if virtual environment exists
if [ ! -d "venv" ]; then
    echo ""
    echo "üì¶ Creating virtual environment..."
    $PYTHON_CMD -m venv venv
    echo "‚úÖ Virtual environment created"
fi

# Activate virtual environment
echo ""
echo "üîß Activating virtual environment..."
if [[ "$OS" == "Windows" ]]; then
    source venv/Scripts/activate 2>/dev/null || . venv/Scripts/activate
else
    source venv/bin/activate
fi
echo "‚úÖ Virtual environment activated"

# Install/upgrade dependencies
echo ""
echo "üì• Installing dependencies..."
pip install --upgrade pip -q
pip install -r requirements.txt -q
echo "‚úÖ Dependencies installed"

# Check for config file
if [ ! -f "config.yaml" ]; then
    if [ -f "config.example.yaml" ]; then
        echo ""
        echo "‚öôÔ∏è  No config.yaml found, copying from example..."
        cp config.example.yaml config.yaml
        echo "‚úÖ Created config.yaml"
    fi
fi

# Display network info
echo ""
echo "============================================================"
echo "üåê Network Configuration"
echo "============================================================"

if [[ "$OS" == "Linux" ]]; then
    IP=$(hostname -I | awk '{print $1}')
elif [[ "$OS" == "macOS" ]]; then
    IP=$(ipconfig getifaddr en0)
elif [[ "$OS" == "Windows" ]]; then
    IP=$(ipconfig | grep "IPv4" | head -1 | awk '{print $NF}')
else
    IP="0.0.0.0"
fi

echo "üìç Your IP: $IP"
echo ""
echo "Access CHIMERA from:"
echo "  ‚Ä¢ Local:   http://0.0.0.0:3000"
echo "  ‚Ä¢ Network: http://$IP:3000"
echo ""
echo "WebSocket endpoint:"
echo "  ‚Ä¢ Local:   ws://0.0.0.0:3001"
echo "  ‚Ä¢ Network: ws://$IP:3001"
echo ""
echo "============================================================"
echo ""

# Start CHIMERA
echo "üöÄ Starting CHIMERA AUTARCH..."
echo ""
echo "Press Ctrl+C to stop"
echo ""

$PYTHON_CMD chimera_autarch.py
